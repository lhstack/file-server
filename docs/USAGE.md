# 使用指南

## 快速开始

### Windows 用户

1. **启动服务**
```powershell
.\run.ps1
```

2. **打开浏览器**
访问 http://127.0.0.1:8080

### Linux/Mac 用户

1. **给脚本执行权限**
```bash
chmod +x run.sh
```

2. **启动服务**
```bash
./run.sh
```

3. **打开浏览器**
访问 http://127.0.0.1:8080

### 手动启动

```bash
cargo run --release
```

## 界面说明

### 顶部栏
- **标题** - 显示"文件管理器"
- **搜索框** - 实时搜索当前目录的文件
- **刷新按钮** - 刷新文件列表

### 左侧栏
- **新建文件夹** - 在当前目录创建新文件夹
- **上传文件** - 上传文件到当前目录
- **路径导航** - 显示当前路径，点击可快速跳转

### 主内容区

#### 工具栏
- **全选复选框** - 选中/取消选中所有文件
- **已选择数量** - 显示选中的文件数
- **删除按钮** - 删除选中的文件（需要先选中）
- **复制按钮** - 复制选中的文件（需要先选中）
- **移动按钮** - 移动选中的文件（需要先选中）

#### 文件列表
表格显示以下信息：
- **复选框** - 用于选中文件
- **名称** - 文件或文件夹名称，点击可打开或预览
- **大小** - 文件大小（文件夹显示"-"）
- **修改时间** - 最后修改时间
- **操作** - 快速操作按钮

## 常见操作

### 1. 浏览文件

**打开文件夹**
- 点击文件夹名称进入该文件夹
- 或点击面包屑导航快速跳转

**返回上级目录**
- 点击面包屑导航中的上级目录名称
- 或点击"根目录"返回最顶层

### 2. 上传文件

**单个文件上传**
1. 点击左侧"上传文件"按钮
2. 选择要上传的文件
3. 点击"打开"确认
4. 等待上传完成

**多个文件上传**
1. 点击左侧"上传文件"按钮
2. 按住 Ctrl（Windows/Linux）或 Cmd（Mac）选择多个文件
3. 点击"打开"确认
4. 等待上传完成

### 3. 创建文件夹

1. 点击左侧"新建文件夹"按钮
2. 在弹出框中输入文件夹名称
3. 点击"创建"按钮
4. 新文件夹会出现在列表中

### 4. 删除文件

**删除单个文件**
1. 在文件列表中找到要删除的文件
2. 点击该行右侧的"删除"按钮
3. 确认删除

**批量删除**
1. 选中要删除的文件（点击复选框）
2. 点击工具栏的"删除"按钮
3. 确认删除

### 5. 复制文件

1. 选中要复制的文件（点击复选框）
2. 点击工具栏的"复制"按钮
3. 导航到目标文件夹
4. 点击工具栏的"粘贴"按钮（如果有）
   - 或使用"移动"功能的目标选择框

**注意:** 当前版本复制后需要使用"移动"功能的目标选择框来完成粘贴操作。

### 6. 移动文件

1. 选中要移动的文件（点击复选框）
2. 点击工具栏的"移动"按钮
3. 在弹出框中选择目标文件夹
4. 点击"确认"按钮
5. 文件会被移动到目标位置

### 7. 预览文件

**支持预览的文件类型**
- 图片：jpg, jpeg, png, gif, svg, webp, bmp
- 文本：txt, json, js, html, css, md, ini, pem, crt, key等
- 视频：mp4, webm, ogg, mov, avi, mkv等
- 音频：mp3, wav, flac, aac, m4a等

**预览步骤**
1. 在文件列表中点击要预览的文件名
2. 或点击该行右侧的"预览"按钮
3. 在弹出框中查看文件内容
4. 点击"×"关闭预览

### 8. 搜索文件

1. 在顶部搜索框中输入文件名
2. 文件列表会实时过滤显示匹配的文件
3. 清空搜索框恢复显示所有文件

## 文件图标说明

| 图标 | 文件类型 |
|------|--------|
| 📁 | 文件夹 |
| 📄 | 文本/PDF文件 |
| 📝 | Word文档 |
| 📊 | Excel表格 |
| 🎬 | PowerPoint演示 |
| 🗜️ | 压缩文件 |
| 🖼️ | 图片文件 |
| 🎥 | 视频文件 |
| 🎵 | 音频文件 |
| ⚙️ | 配置/代码文件 |
| 🌐 | HTML文件 |
| 🎨 | CSS文件 |
| 🐍 | Python文件 |
| ☕ | Java文件 |
| 🦀 | Rust文件 |
| 💻 | 脚本文件 |

## 配置说明

编辑 `config.json` 文件可以修改以下设置：

```json
{
  "dir": "./public",      // 文件管理的根目录
  "host": "127.0.0.1",    // 服务器监听地址
  "port": "8080"          // 服务器监听端口
}
```

### 常见配置

**修改管理目录**
```json
{
  "dir": "D:/MyFiles"
}
```

**修改服务器地址（允许远程访问）**
```json
{
  "host": "0.0.0.0"
}
```

**修改服务器端口**
```json
{
  "port": "3000"
}
```

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+A | 全选所有文件 |
| Delete | 删除选中文件 |
| F5 | 刷新文件列表 |

## 常见问题

### Q: 上传文件时出现错误？
A: 
- 检查文件大小是否过大
- 检查磁盘空间是否充足
- 检查目录权限是否正确

### Q: 预览文件时显示"不支持预览此文件类型"？
A: 当前支持图片、文本、视频和音频文件预览。其他文件类型可以下载后用本地应用打开。

### Q: 如何删除文件夹？
A: 
- 点击文件夹右侧的"删除"按钮
- 或选中文件夹后点击工具栏的"删除"按钮
- 系统会递归删除文件夹及其所有内容

### Q: 移动文件后原位置是否还有副本？
A: 不会。移动操作会将文件从原位置移到新位置，原位置不再有该文件。

### Q: 如何复制文件到另一个位置？
A: 
1. 选中文件
2. 点击"复制"按钮
3. 导航到目标位置
4. 使用"移动"功能的目标选择框完成粘贴

### Q: 支持的最大文件大小是多少？
A: 理论上没有限制，取决于磁盘空间和内存。

### Q: 如何在远程机器上访问？
A: 
1. 修改 `config.json` 中的 `host` 为 `0.0.0.0`
2. 重启服务
3. 使用 `http://服务器IP:端口` 访问

### Q: 如何后台运行服务？
A: 
- Windows: 使用任务计划程序或 `start /B` 命令
- Linux/Mac: 使用 `nohup ./run.sh &` 或 `screen`

### Q: 视频/音频为什么不能seek？
A: 确保浏览器支持Range请求。大多数现代浏览器都支持。

### Q: 如何处理大文件上传？
A: 系统支持流式上传，理论上可以处理任意大小的文件。

## 性能建议

- 避免在单个目录中放置过多文件（建议不超过10000个）
- 定期清理不需要的文件以节省磁盘空间
- 对于大文件操作，建议使用命令行工具

## 安全建议

- 不要在公网上直接暴露此服务
- 建议使用反向代理（如Nginx）并配置认证
- 定期备份重要文件
- 限制可访问的目录范围

## 获取帮助

如有问题，请：
1. 查看本文档
2. 查看 [README.md](../README.md)
3. 检查浏览器控制台的错误信息
4. 查看服务器日志输出
